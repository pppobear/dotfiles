# Kitty launch actions configuration
# URL patterns are processed first, then protocols

# =============================================================================
# URL PATTERNS (processed before protocols)
# =============================================================================

# Git clone URLs - special handling to clone instead of opening in browser
url_pattern git@github\.com:.+\.git
action launch --type=os-window --cwd=current git clone $URL

url_pattern https://github\.com/.+\.git
action launch --type=os-window --cwd=current git clone $URL

# GitHub specific patterns that need browser
url_pattern https://github\.com/.+/(issues|pull)/\d+
action launch --type=os-window xdg-open $URL

url_pattern https://github\.com/.+/blob/.+
action launch --type=os-window xdg-open $URL

# Documentation links
url_pattern https://(docs\.|www\.)?[^/]+\.(com|org|net|io)/(docs?|documentation)/.*
action launch --type=os-window xdg-open $URL

# Stack Overflow
url_pattern https://stackoverflow\.com/.*
action launch --type=os-window xdg-open $URL

# YouTube
url_pattern https://(www\.)?youtube\.com/watch.*
action launch --type=os-window xdg-open $URL

# Local development servers
url_pattern https?://(localhost|127\.0\.0\.1|0\.0\.0\.0)(:\d+)?.*
action launch --type=os-window xdg-open $URL

# =============================================================================
# PROTOCOLS (fallback for general URL types)
# =============================================================================

# HTTP/HTTPS URLs - general fallback
protocol http
action launch --type=os-window xdg-open $URL

protocol https
action launch --type=os-window xdg-open $URL

# Other protocols
protocol ssh
action launch --type=os-window ssh -- $URL

protocol git
action launch --type=os-window --cwd=current git clone $URL

protocol mailto
action launch --type=os-window xdg-open $URL

protocol ftp
action launch --type=os-window xdg-open $URL

protocol ftps
action launch --type=os-window xdg-open $URL

# =============================================================================
# FILE HANDLING (local files)
# =============================================================================

# Open script files. Change confirm-always to confirm-never or confirm-if-needed to
# disable confirmation for all or executable files respectively.
protocol file
ext sh,command,tool
action launch --hold --type=os-window kitten __shebang__ confirm-always $FILE_PATH $SHELL

# Open shell specific script files
protocol file
ext fish,bash,zsh
action launch --hold --type=os-window kitten __shebang__ confirm-always $FILE_PATH __ext__

# Open directories
protocol file
mime inode/directory
action launch --type=os-window --cwd -- $FILE_PATH

# Open executable file. Remove kitten __confirm_and_run_exe__ to execute
# without confirmation.
protocol file
mime inode/executable,application/vnd.microsoft.portable-executable
action launch --hold --type=os-window -- kitten __confirm_and_run_exe__ $FILE_PATH

# Open text files without fragments in the editor
protocol file
mime text/*
action launch --type=os-window -- $EDITOR -- $FILE_PATH

# Open image files with icat
protocol file
mime image/*
action launch --type=os-window kitten icat --hold -- $FILE_PATH

# Open PDF files
protocol file
mime application/pdf
action launch --type=os-window xdg-open $FILE_PATH

# Open video files
protocol file
mime video/*
action launch --type=os-window xdg-open $FILE_PATH

# Open audio files
protocol file
mime audio/*
action launch --type=os-window xdg-open $FILE_PATH

# Open archive files
protocol file
ext zip,tar,gz,bz2,xz,7z,rar
action launch --type=os-window xdg-open $FILE_PATH

# Open office documents
protocol file
ext doc,docx,xls,xlsx,ppt,pptx,odt,ods,odp
action launch --type=os-window xdg-open $FILE_PATH